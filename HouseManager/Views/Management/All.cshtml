@inject IMemoryCache cache

@{
	var editPresident = false;
	var editCashier = false;
	var editModel = cache.Get("EditModel") as ActiveManagementFormModel;

	if (TempData["Edit"] != null && (bool)TempData["Edit"] == true)
	{
		//editModel = TempData["EditModel"] as ActiveManagementFormModel;

		if (editModel.Position == ManagerPosition.President)
		{
			editPresident = true;
		}
		else
		{
			editCashier = true;
		}
	}

	var emptyPresidentModel = new ActiveManagementFormModel() { Position = ManagerPosition.President };
	var emptyCashierModel = new ActiveManagementFormModel() { Position = ManagerPosition.Cashier };
}

<form class="col-12">
	<div class="bg-light rounded">
		<h4 class="text-center mb-4">Management</h4>
		<hr />
		<div id="current-management" class="row row-cols-1 row-cols-md-2 justify-content-center">
			@if (editPresident == true)
			{
				<partial name="_ActiveManagerFormPartial" model="@editModel" />
			}
			else
			{
				@if (ViewBag.ActivePresident == null)
				{
					<partial name="_ActiveManagerFormPartial" model="@emptyPresidentModel" />
				}
				else
				{
					<partial name="_ActiveManagerViewPartial" model="@ViewBag.ActivePresident" />
				}
			}

			@if (editCashier == true)
			{
					<partial name="_ActiveManagerFormPartial" model="@editModel" />
			}
			else
			{
				@if (ViewBag.ActiveCashier == null)
				{
					<partial name="_ActiveManagerFormPartial" model="@emptyCashierModel" />
				}
				else
				{
					<partial name="_ActiveManagerViewPartial" model="@ViewBag.ActiveCashier" />
				}
			}
		</div>
		<div id="previous-managements" class="row row-cols-1 row-cols-md-2 justify-content-center">
			<div>
				<h5>Previous presidents</h5>
				<partial name="_InactiveManagerViewPartial" model="@ViewBag.InactivePresidents" />
			</div>
			<div>
				<h5>Previous cashiers</h5>
				<partial name="_InactiveManagerViewPartial" model="@ViewBag.InactiveCashiers" />
			</div>
		</div>
	</div>
</form>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}